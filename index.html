<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Socket.IO Example</title>
  <style>
    #message {
      display: flex;
      justify-content: center;
      text-align: center;
      position: absolute;
      top: 40px;
      width: 230px;
      height: 80px;
      background: blue;
      color: white;
      box-shadow: 5px 3px 4px 5px black;
      border-radius: 7px;

    }
    #userName {

      display: flex;
      justify-content: center;
      text-align: center;
      position: relative;
      top: -17px;
      left: -37px;
      background: blue;


    }

  </style>
</head>
<body>
  <div id="message">
    Waiting for messages...
  </div>
  <b>User Name:</b>  <div id="userName"></div>

</br>
<b></b>userID:</b>
<div id="usrID">
waiting....
</div>

<br>
<div id="message1">

</div>
<br><br>
<input id="inp" type="text">
<br><br>
<button id='send'>send</button>


<script  src="http://localhost:3000/socket.io/socket.io.js"></script>

<!--<script>
const usrName = document.getElementById('userName');
const ID = document.getElementById("usrID");
const socket = io("http://localhost:3000")
const msg = document.getElementById("message");
const msg1 = document.getElementById('message1');

const dataInp = document.getElementById('inp');
const btn = document.getElementById("send")

const data = dataInp.value;
btn.addEventListener("click", e=> {

//msg.innerHTML=dataInp.value;
const userID = socket.id;
socket.emit('send-data', dataInp.value, userID);


})
//receive mesage when user send or cleitns sends messsage
socket.on('receive', (data, usrID)=> {
msg.innerHTML = data;
ID.innerHTML = usrID;
})

//reeice messae when user connects
socket.on("user", (message) => {
console.log('user connected from client client side');
const name = prompt("user name plz:");
usrName.innerHTML = name;
usrName.style.color = "white";

usrName.style.width = "100px";
usrName.style.height = "20px";
usrName.style.borderRadius = "5px";
usrName.style.margin = "auto";
//msg1.innerHTML = message;


});

window.addEventListener('keydown', e=> {
socket.emit('typing', "typing...");

if (e.keyCode == 13) {
const userID = socket.id;
socket.emit('send-data', dataInp.value, userID);
dataInp.value = " ";

}
})


//get teh typehnhg reslut

socket.on('typing-get', e=> {
msg.innerHTML = e;
})
</script>-->

<script>

const usrName = document.getElementById('userName');
const ID = document.getElementById("usrID");
const socket = io("http://localhost:3000")
const msg = document.getElementById("message");
const msg1 = document.getElementById('message1');

const dataInp = document.getElementById('inp');
const btn = document.getElementById("send")

let data = "";

btn.addEventListener("click", e => {
  data = dataInp.value;
  socket.emit('send-data', data, socket.id);
  dataInp.value = "";
});

window.addEventListener('keydown', e => {
  socket.emit('typing', "typing...");

  if (e.keyCode == 13) {
    data = dataInp.value;
    const userID = socket.id;
    socket.emit('send-data', data, userID);
    dataInp.value = "";
  }
});

socket.on('receive', (data, usrID) => {
  msg.innerHTML = data;
  ID.innerHTML = usrID;
});

socket.on("user", () => {
  console.log('user connected from client client side');
  const name = prompt("user name plz:");
  usrName.innerHTML = name;
  usrName.style.color = "white";
  usrName.style.width = "100px";
  usrName.style.height = "20px";
  usrName.style.borderRadius = "5px";
  usrName.style.margin = "auto";
});

socket.on('typing-get', e => {
  msg.innerHTML = e;
});


</script>

</body>
</html>